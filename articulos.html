<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Todos los ArtÃ­culos - Perspectivas</title>
  <link rel="icon" type="image/svg+xml" href="/assets/img/icono-perspectivas.svg">
  <link rel="stylesheet" href="/style.css">
  <style>
    .articles-list {
      list-style: none;
      padding: 0;
    }
    .articles-list li {
      padding: 1rem;
      border: 1px solid #ddd;
      margin-bottom: 1rem;
      border-radius: 4px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .articles-list li:hover {
      background: #f5f5f5;
      border-color: #b91c1c;
    }
    .articles-list a {
      display: block;
      text-decoration: none;
      color: inherit;
    }
    .article-title { font-weight: bold; font-size: 1.1rem; margin-bottom: 0.5rem; }
    .article-slug { font-size: 0.85rem; color: #666; font-family: monospace; }
    .article-date { font-size: 0.9rem; color: #999; }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="wrap">
      <a class="brand" href="/">Perspectivas</a>
    </div>
  </header>

  <main class="wrap section">
    <h1>Todos los ArtÃ­culos</h1>
    <p>Haz clic en cualquier artÃ­culo para verlo completo.</p>

    <h2 style="margin-top: 2rem;">Noticias</h2>
    <ul id="noticias-list" class="articles-list"></ul>

    <h2 style="margin-top: 2rem;">AnÃ¡lisis</h2>
    <ul id="analisis-list" class="articles-list"></ul>

    <h2 style="margin-top: 2rem;">Programa</h2>
    <ul id="programa-list" class="articles-list"></ul>
  </main>

  <script>
    async function loadArticles() {
      const res = await fetch('/content.json?t=' + Date.now());
      const data = await res.json();

      // Noticias
      const noticiasList = document.getElementById('noticias-list');
      data.noticias.forEach(n => {
        const li = document.createElement('li');
        li.innerHTML = `
          <a href="/noticia.html?id=${encodeURIComponent(n.slug || n.id)}">
            <div class="article-title">${n.title}</div>
            <div class="article-slug">slug: ${n.slug}</div>
            <div class="article-date">ðŸ“… ${new Date(n.date).toLocaleDateString('es-ES')}</div>
          </a>
        `;
        noticiasList.appendChild(li);
      });

      // AnÃ¡lisis
      const analysisList = document.getElementById('analisis-list');
      data.analisis.forEach(a => {
        const li = document.createElement('li');
        li.innerHTML = `
          <a href="/noticia.html?id=${encodeURIComponent(a.slug || a.id)}">
            <div class="article-title">${a.title}</div>
            <div class="article-slug">slug: ${a.slug}</div>
            <div class="article-date">ðŸ“… ${new Date(a.date).toLocaleDateString('es-ES')}</div>
          </a>
        `;
        analysisList.appendChild(li);
      });

      // Programa
      const programaList = document.getElementById('programa-list');
      data.programa.forEach(p => {
        const li = document.createElement('li');
        li.innerHTML = `
          <a href="/noticia.html?id=${encodeURIComponent(p.slug || p.id)}">
            <div class="article-title">${p.title}</div>
            <div class="article-slug">slug: ${p.slug}</div>
            <div class="article-date">ðŸ“… ${new Date(p.date).toLocaleDateString('es-ES')}</div>
          </a>
        `;
        programaList.appendChild(li);
      });
    }

    loadArticles().catch(err => {
      document.body.innerHTML = '<p style="color: red; padding: 20px;">Error cargando artÃ­culos: ' + err.message + '</p>';
    });
  </script>
  <script src="/script.v3.js?v=4.0"></script>
</body>
</html>
