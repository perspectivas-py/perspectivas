backend:
  name: github
  repo: perspectivas-py/perspectivas
  branch: main
  base_url: https://perspectivaspy.vercel.app  # <--- IMPORTANTE: PONER ESTO DE NUEVO
  auth_endpoint: api/auth
  redirect_uri: https://perspectivaspy.vercel.app/api/callback   # <-- AÑADIR ESTO

media_folder: "assets/img"
public_folder: "/assets/img"

publish_mode: editorial_workflow

# Borré local_backend: true para evitar confusiones en producción,
# pero podés dejarlo si corres npx decap-server localmente.

site_url: https://perspectivaspy.vercel.app
display_url: https://perspectivaspy.vercel.app

logo_url: https://placehold.co/180x50?text=Perspectivas

collections:

  # ============================================================
  # NOTICIAS
  # ============================================================
  - name: "noticias"
    label: "Noticias"
    folder: "content/noticias"
    create: true
    slug: "{{slug}}"
    extension: "md"
    format: "frontmatter"
    fields:
      - { label: "ID", name: "id", widget: "string", hint: "Debe ser único. Ej: macro-enero-2025" }
      - { label: "Type", name: "type", widget: "hidden", default: "noticias" }
      - { label: "Categoría", name: "category", widget: "string" }
      - { label: "Fecha", name: "date", widget: "datetime" }
      - { label: "Título", name: "title", widget: "string" }
      - { label: "Descripción corta", name: "description", widget: "text" }

      # -------- PORTADA manual (obligatorio) --------
      - label: "Imagen de portada"
        name: "thumbnail"
        widget: "image"
        required: true

      - { label: "Cuerpo (Markdown)", name: "body", widget: "markdown" }
      - { label: "Slug", name: "slug", widget: "string", hint: "Opcional. Si no lo completás será igual al filename." }

  # ============================================================
  # ANALISIS
  # ============================================================
  - name: "analisis"
    label: "Análisis"
    folder: "content/analisis"
    create: true
    slug: "{{slug}}"
    extension: "md"
    fields:
      - { label: "ID", name: "id", widget: "string" }
      - { label: "Type", name: "type", widget: "hidden", default: "analisis" }
      - { label: "Categoría", name: "category", widget: "string" }
      - { label: "Fecha", name: "date", widget: "datetime" }
      - { label: "Título", name: "title", widget: "string" }

      # portada manual
      - label: "Imagen de portada"
        name: "thumbnail"
        widget: "image"
        required: true

      - { label: "Contenido HTML", name: "body_html", widget: "markdown", hint: "Contenido del análisis" }
      - { label: "Slug", name: "slug", widget: "string" }

  # ============================================================
  # PROGRAMA (Videos YouTube)
  # ============================================================
  - name: "programa"
    label: "Programa Perspectivas (Videos)"
    folder: "content/programa"
    create: true
    slug: "{{slug}}"
    extension: "md"
    fields:
      - { label: "ID", name: "id", widget: "string" }
      - { label: "Type", name: "type", widget: "hidden", default: "programa" }
      - { label: "Categoría", name: "category", widget: "string" }
      - { label: "Fecha", name: "date", widget: "datetime" }
      - { label: "Título", name: "title", widget: "string" }

      # portada manual
      - label: "Imagen miniatura"
        name: "thumbnail"
        widget: "image"
        required: true

      - { label: "URL Video YouTube", name: "embed_url", widget: "string" }

  # ============================================================
  # PODCAST
  # ============================================================
  - name: "podcast"
    label: "Podcast"
    folder: "content/podcast"
    create: true
    slug: "{{slug}}"
    extension: "md"
    fields:
      - { label: "ID", name: "id", widget: "string" }
      - { label: "Type", name: "type", widget: "hidden", default: "podcast" }
      - { label: "Fecha", name: "date", widget: "datetime" }
      - { label: "Título", name: "title", widget: "string" }

      # portada manual
      - label: "Imagen del episodio"
        name: "thumbnail"
        widget: "image"
        required: true

  # ============================================================
  # SPONSORS
  # ============================================================
  - name: "sponsors"
    label: "Patrocinadores & Aliados"
    folder: "content/sponsors"
    create: true
    slug: "{{slug}}"
    extension: "md"
    fields:
      - { label: "ID", name: "id", widget: "string" }
      - { label: "Título / Marca", name: "title", widget: "string" }
      - { label: "Headline", name: "headline", widget: "string" }
      - { label: "Descripción breve", name: "excerpt", widget: "text" }
      - { label: "URL Externa", name: "url", widget: "string" }

      # portada manual
      - label: "Logo"
        name: "logo"
        widget: "image"
        required: true
